
跟语法文件，ANTLR 自动生成了很多文件。


下面简单介绍一下生成的文件：
- ArrayInitParser.java：该文件包含一个语法分析器类的定义，这个语法分析器专门用来识别我们的“数组语言”的语法ArrayInit。在该类中，每条规则都有对应的方法，除此之外，还有一些其他的辅助代码。

- ArrayInitLexer.java：ANTLR 能够自动识别出我们的语法中的文法规则和词法规则。这个文件包含的是词法分析器的类定义，它是由 ANTLR 通过分析词法规则 INT 和 WS，以及语法中的字面值 '{'、','，和 '}' 生成的。词法分析器的作用是将输入字符序列分解成词条。它形如：


- ArrayInit.tokens：ANTLR 会给每个我们定义的词条指定一个数字形式的类型，然后将它们的对应关系存储于该文件中。有时，我们需要将一个大型语法切分为多个更小的语法，在这种情况下，这个文件就非常有用了。通过它，ANTLR 可以在多个小型语法间同步全部的词条的类型。

- ArrayInitListener.java，ArrayInitBaseListener.java：默认情况下，ANTLR 生成的语法分析器能将输入文本转换为一棵语法分析树。在遍历语法分析树时，遍历器能够触发一系列“事件”（回调），并通知我们提供的监听器对象。ArrayInitListener 接口给出了这些回调方法的定义，我们可以实现它来完成自定义的功能。ArrayInitBaseListener 是该接口的默认实现类，为其中的每个方法提供了一个空实现。ArrayInitBaseListener 类使得我们只需要覆盖那些我们感兴趣的回调方法。通过指定 -visitor 命令行参数，ANTLR 也可以为我们生成语法分析树的访问器。接下来，我们将使用监听器来将short数组初始化语句转换为字符串对象，不过在这之前，我们首先使用一些样例输入来验证我们的语法分析器是否能正常进行匹配工作。


ANTLR语法比正则表达式功能更强大
熟悉正则表达式的读者可能会产生疑问，使用ANTLR来解决这么简单的识别问题是不是有点小题大做了？实际上，由于嵌套的花括号结构的存在，正则表达式无法识别这样的初始化语句。正则表达式没有存储的概念，它们无法记住之前匹配过的输入。因此，它们不能将左右花括号正确配对。我们将在5.3节“嵌套模式”部分中予以详细讨论。3.2 测试生成的语法分析器
对语法运行ANTLR之后，我们需要编译自动生成的Java源代码。简单起见，我们在工作目录/tmp/array下完成所有的编译操作。
如果编译器产生了一个ClassNotFoundException异常，说明你可能没有正确设置Java的CLASSPATH环境变量。在类UNIX系统上，你需要执行以下命令（也可以写在类似.bash_profile的启动脚本中）：
我们使用第1章提到的grun别名来启动TestRig，执行对语法的测试。下面的命令告诉我们如何将词法分析器生成的词法符号打印出来。



https://www.bilibili.com/read/cv19652653?from=articleDetail&spm_id_from=333.976.b_726561645265636f6d6d656e64496e666f.2









。。。
